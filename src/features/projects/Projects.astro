<div id="projects-container" class="relative group max-w-6xl mx-auto px-4 bg-indigo-400">
    <div id="projects" class="flex overflow-x-auto gap-6 pb-10 snap-x snap-mandatory scroll-smooth" style="scrollbar-width: none; -ms-overflow-style: none;">
        <a href="">
            <img src="" alt="">
            <h2>Spend App | SyncSpend</h2>
            <p>A brief description of Project 1.</p>
        </a>

        <a href="">
            <img src="" alt="">
            <h2>Contact App</h2>
            <p>A brief description of Project 2.</p>
        </a>

        <a href="">
            <img src="" alt="">
            <h2>Country finder</h2>
            <p>A brief description of Project 3.</p>
        </a>
        
        <a href="">
            <img src="" alt="">
            <h2>To-Do App</h2>
            <p>A brief description of Project 4.</p>
        </a>
        <button id="prev" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white shadow-lg p-3 rounded-full z-10 opacity-0 group-hover:opacity-100 transition-opacity border border-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 11v2H8v2H6v-2H4v-2h2V9h2v2zM10 7H8v2h2zm0 0h2V5h-2zm0 10H8v-2h2zm0 0h2v2h-2z" />
            </svg>
        </button>
        <button id="next" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white shadow-lg p-3 rounded-full z-10 opacity-0 group-hover:opacity-100 transition-opacity border border-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M4 11v2h12v2h2v-2h2v-2h-2V9h-2v2zm10-4h2v2h-2zm0 0h-2V5h2zm0 10h2v-2h-2zm0 0h-2v2h2z" />
            </svg>
        </button>   
    </div> 
</div> 

<script>
    const setupCarousel = () => {
        const carousel = document.querySelector('#projects');
        const nextBtn = document.querySelector('#next');
        const prevBtn = document.querySelector('#prev');

        if (!carousel || !nextBtn || !prevBtn) return;

        const cards = carousel.querySelectorAll('a');
        cards.forEach(card => {
            card.className = "snap-center shrink-0 w-[300px] md:w-[400px] p-7 bg-white border border-gray-100 rounded-[2rem] shadow-sm hover:shadow-md transition-all duration-300 group/card";
            
            const h2 = card.querySelector('h2');
            if (h2) h2.className = "text-2xl font-serif italic text-gray-600 mb-2";
            
            const p = card.querySelector('p');
            if (p) p.className = "text-sm text-gray-500 font-light";

            const img = card.querySelector('img');
            if (img) img.className = "w-full h-48 object-cover rounded-lg mb-4 bg-gray-200";
        });

        nextBtn.addEventListener('click', () => carousel.scrollBy({ left: 350, behavior: 'smooth' }));
        prevBtn.addEventListener('click', () => carousel.scrollBy({ left: -350, behavior: 'smooth' }));
    };

    setupCarousel();
    document.addEventListener('astro:after-swap', setupCarousel);
    document.addEventListener('astro:page-load', setupCarousel);
</script>